# Malware
Some typical and exemplary pieces and types of malware.

## Drive-by Downloads
The attacker compromises a webserver and injects JS into a page. This page detects which plugins are running in client browsers. JS then injects malicious Flash/Java Applet objects to exploit these vulnerable plugins. An attacker could also use social engineering to convince people to click links with malicious JS.

### Google's Safe Browsing API
Google maintains a list of URLS that Google has determined are associated with things like phishing, drive-bys, etc. Other browsers use this list to warn users.

## CVE-2008-2992
Exploits Adobe PDF reader. You can embed JS in PDF files, so an attacker can launch a buffer overflow against JS interfaces. Specifically, `util.printf()`. 

```javascript
var bigNum = ... // large number
util.printf("%45000f", bigNum);
```

Since printf is a small state machine, this causes the small stack-allocated buffer to overflow (it's unchecked). This overflow squashes a function pointer placed before a stack canary.

## Static Analysis
Often, static analysis is not enough. Case study:

Youmi SDK for mobile ads which helps app developers generate code, track clicks, etc. Apple had a review process that included human testing as well as a static code analyzer to check for application invocations of sensitive APIs. 

Unfortunately, Objective-C, like Ruby and Smalltalk, allows for dynamic invocations of methods via `msgSend`. This is known as [[dynamic dispatch|Dynamic-Dispatch]]. This means it's impossible to perform complete dynamic dispatch, since Youmi can (and did) create dynamic strings which read sensitive information.

